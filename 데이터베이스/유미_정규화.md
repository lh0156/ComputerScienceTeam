# 정규화

## 릴레이션

22/07/10

📎 나쁜 릴레이션

- 데이터 중복; 일관성 유지의 어려움, 저장 공간 낭비
- 갱신 이상; 데이터 조작시, 중복에 따른 부작용

📎 갱신 이상

- 삽입 이상; 레코드 추가 시 불필요한 컬럼의 값 없이는 추가하지 못하는 경우
    
    ![Untitled](%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%80%E1%85%B2%E1%84%92%E1%85%AA%20a9dd7ef5fe3b4e22b8e91710f27b0f43/Untitled.png)
    
- 삭제 이상; 삭제 시 의도하지 않았던 다른 데이터가 삭제되는 경우
    
    ![Untitled](%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%80%E1%85%B2%E1%84%92%E1%85%AA%20a9dd7ef5fe3b4e22b8e91710f27b0f43/Untitled%201.png)
    
- 수정 이상; 중복 저장된 레코드 수정 시, 모두 반영이 안 되어 데이터베이스의 일관성이 깨지는 경우
    
    ![Untitled](%E1%84%8C%E1%85%A5%E1%86%BC%E1%84%80%E1%85%B2%E1%84%92%E1%85%AA%20a9dd7ef5fe3b4e22b8e91710f27b0f43/Untitled%202.png)
    

📎 좋은 릴레이션

- 컴퓨터 프로그래머적 관점에서의 모델링; 어떻게 데이터를 저장할지
- 릴레이션의 스키마가 효율적으로 실세계를 반영하고 있는지 평가

📎 좋은 릴레이션 고려사항

- 한 릴레이션 내의 컬럼 간 관계 분석
- 원하지 않는 데이터의 종속과 중복 제거
- 새로운 컬럼들이 데이터베이스에 추가될 때, 기존 컬럼과의 관계 수정을 최소화

## 함수적 종속성

📎 함수적 종속성 정의

<aside>
💡 임의의 릴레이션 스키마 R의 인스턴스 r(R)에 포함되는 서로 다른 두 레코드 r1, r2와 컬럼 집합 X와 Y에 대해, r1[X] = r2[X]일 때, r1[Y] = r2[Y] 이면 함수적 종속성 X → Y가 성립한다.

</aside>

- 릴레이션 인스턴스를 분석하여 속성들 간의 **연관관계**를 표현
- 릴레이션의 효율성을 향상시켜 좋은 릴레이션으로 변환하는데 이용되는 중요한 개념

📎 함수적 종속성 

- 함수적 종속성은 릴레이션 효율성 여부에 중요한 판단 기준
- 릴레이션의 인스턴스만으로 내재된 모든 함수적 종속성을 찾아내기 어려움.
- 판별되지 않은 모든 함수적 종속성을 찾기 위해 **추론 규칙**을 사용하여 함수적 종속성을 확장
- 클로저; 판별된 함수적 종속성 집합으로부터 유추할 수 있는 모든 함수적 종속성 집합

📎 함수적 종속성 추론 규칙

- 재귀성 규칙; X⊇Y 이면, X→Y 이다.
- 부가성 규칙; X→Y 이면, XZ→YZ 이다.
- 이행성 규칙; X→Y 이고, Y→Z 이면, X→Z 이다.
- 분해 규칙; X→YZ 이면, X→Y 이다.
- 합집합 규칙; X→Y 이고, X→Z 이면, X→YZ 이다.
- 의사 이행성 규칙; X→Y 이고, WY→Z 이면, WX→Z 이다.

📎 카노니컬 커버

- 함수적 종속성 추론 규칙으로 확장된 클로저에는 자명한 종속성과 중복된 종속성을 포함
- 불필요한 함수적 종속성을 제거한 표준형으로 변환 후 정규화 수행

📎 표준형 조건

- F의 모든 함수적 종속성의 오른편 속성은 반드시 1개
- F에서 X→A를 X의 진부분집합 Y에 대하여 Y→A로 교체했을 때, 그 집합이 F와 동등한 집합이 불가능
- F에서 어떤 함수적 종속성을 제거했을 때, 그 집합이 F와 동등한 집합이 불가능

## 정규화

📎 정규형

- 이상 현상을 최소화 하도록 특정 조건을 갖춘 릴레이션의 형식
- 제1정규형, 제2정규형, 제3정규형, BC정규형, 제4정규형, 제5정규형

📎 정규형의 분류

- 제1정규형; 릴레이션 스키마에서 정의된 모든 속성의 도메인이 원자값을 갖는 상태
- 제2정규형; 주어진 릴레이션의 인스턴스가 기본키가 아닌 속성들이 기본키에 완전히 종속되 어있는 상태
- 제3정규형; 릴레이션이 제2정규형을 만족하고, 기본키가 아닌 속성들이 어떤 키에도 이행적으로 종속되지 않은 상태
- BC정규형; 릴레이션이 제3정규형을 만족하고 릴레이션에 성립하는 X→Y 형태의 모든 함수적 종속성에 대하여 X가 슈퍼키인 상태

📎 정규화

<aside>
💡 특정 정규형의 조건을 만족하도록 릴레이션과 속성을 재구성하는 과정

</aside>

- DB 내 모든 릴레이션을 효과적으로 표현
- 보다 간단한 관계 연산에 기초하여 검색 알고리즘을 효과적으로 작성할 수 있도록 지원
- 바람직하지 않은 삽입, 수정, 삭제 등의 이상 발생 방지
- 새로운 형태의 데이터가 삽입될 때 릴레이션 재구성 필요성을 축소
- 릴레이션 분할을 통해 데이터의 중복성을 최소화하는 과정
- 사용 과정에서 많은 조인연산 유발

📎 역정규화

- 정규화를 통해 분리되었던 릴레이션을 통합하는 재조정을 수행하고, 정보의 부분적 중복을 허용하는 기법
- 데이터 접근 성능 개선 목적