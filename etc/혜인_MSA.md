# MSA

<aside>
💡 **MSA(MicroService Architecture)**
: 하나의 큰 어플리케이션을 여러 개의 작은 어플리케이션으로 쪼개어 변경과 조합이 가능하도록 만든 아키텍쳐

</aside>

## MSA 등장 배경

### Monolithic Architecture
![img1 daumcdn (1)](https://user-images.githubusercontent.com/90780701/166146302-28edbfce-6c5a-4c26-8850-9650ad4cb994.png)

**정의**

- 소프트웨어의 모든 구성요소가 한 프로젝트에 통합되어 있는 형태

**특징**

- 전체 어플리케이션이 하나로 되어있어서 동일한 개발 툴을 사용
- 배포 및 테스트도 하나의 어플리케이션만 수행하면 됨
- 각 컴포넌트들이 함수로 호출되기 때문에 성능에 제약이 덜 하고 운영 관리가 용이

**한계**

- 부분 장애가 전체 서비스의 장애로 확대될 수 있다.
- 부분적인 Scale-out이 어렵다.
    - Scale-Out: 여러 서버로 나누어 일을 처리하는 방식

- 빌드 시간 및 테스트시간, 배포 시간이 오래 걸린다
- 한 프레임워크와 언어에 종속적이다

## **Micro service**

<aside>
💡 **Micro service
:** 스스로 돌아갈 수 있으며, 독립적 배포 가능한 작은 서비스

</aside>

- 각각의 서비스는 그 크기가 작을 뿐, 서비스 자체는 하나의 모놀리식 아키텍쳐와 유사한 구조를 가짐
- 각각의 서비스는 독립적으로 배포가 가능 해야함
- 각각의 서비스는 다른 서비스에 대한 의존성이 최소화 되어야 함
- 각 서비스는 개별 프로세스로 구동되며, REST와 같은 가벼운 방식으로 통신되어야 함

## **MSA의 장단점**

### MSA의 장점

- 서비스 별 개별 배포 가능
    - 배포 시 전체 서비스의 중단이 없음
    - 요구사항을 신속하게 반영하여 빠르게 배포할 수 있음
- 특정 서비스에 대한 확장성이 용이함
    - 클라우드 사용에 적합한 아키텍쳐
- 장애가 전체 서비스로 확장될 가능성이 적음
    - 부분적 장애에 대한 격리가 수월함
- 해당 기능에 맞는 기술, 언어 등을 선택하여 사용할 수 있다. (신기술의 적용이 유연, 서비스를 polyglot하게 개발/운영 가능)

### MSA의 단점

- 서비스 간 호출 시 API를 사용하기 때문에, 통신 비용이나 Latency가 그만큼 늘어나게 됨
- 서비스가 분리되어 있기 때문에 테스트와 트랜잭션의 복잡도가 증가하고 많은 자원을 필요로 함
- 데이터가 여러 서비스에 걸쳐 분산되기 때문에 한번에 조회하기 어렵고, 데이터의 정합성 또한 관리하기 어렵다.
    - msa는 데이터 저장 시 하나의 DB에 중앙 집중화를 하지 않고 서비스 별 별도의 DB를 사용
    - DB의 종류를 별도로 가져갈 수도 있고, 같은 DB를 사용하더라도 나누어서 사용
