# 프로세스와 스레드

## 프로세스

22/05/01

📎 프로세스

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%83%E1%85%B3%209ef7e348c8d04bc89ad69b22306bfc40/Untitled.png)

- **프로세스**는 **실행** 중인 프로그램 파일을 의미함.
- 운영체제로부터 자원을 할당 받아 동작

📎 용어 정리

- 프로그램; 디스크 내 파일로 존재. 동작을 하지 않는 정적이며 수동적인 개체
- 프로세스; 동작을 하는 능동적인 개체
- 자원; CPU, 메모리, 입출력장치, 파일 등
- 동작; CPU가 프로세스의 명령을 실행

📎 프로세스 영역

- **Code**; 실행 프로그램의 코드나 명령어들이 기계어 형태로 저장되는 영역
- **Data**; 코드에서 선언한 전역 변수와 정적 변수가 저장되는 영역
- **Stack**; 함수 안에서 선언된 지역 변수, 매개 변수, 리턴 값 등이 저장
- **Heap**; 관리가 가능한 데이터 이외의 다른 형태의 데이터를 관리하기 위한 자유 공간

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%83%E1%85%B3%209ef7e348c8d04bc89ad69b22306bfc40/Untitled%201.png)

📎 프로세스 상태 변화

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%83%E1%85%B3%209ef7e348c8d04bc89ad69b22306bfc40/Untitled%202.png)

- 생성; 처음 작업이 시스템에 주어진 상태
- 준비; 실행 준비가 되어 CPU 할당을 기다리는 상태
- 실행; 프로세스가 처리되는 상태
- 대기; 프로세스가 특정 자원을 할당 받을 때까지 또는 I/O 작업이 끝날 때까지 보류되는 상태
- 종료; 모든 처리가 완료되어 사용자에게 반환되는 상태

📎 프로세스 생성

- 부모 프로세스; 실행 과정 동안 프로세스 생성 시스템 호출을 이용하여 여러 개의 프로세스 생성
- 자식 프로세스; 생성된 새로운 프로세스
- 부모 프로세스는 자식 프로세스에게 **자원**을 일부 나누어 주거나 공유할 수 있음.
- 자원을 제한하는 이유는 시스템 과부하 방지

📎 프로세스 종료

- 자식 프로세스가 할당된 자원의 사용을 초과하거나, 작업이 필요하지 않을 때 **부모 프로세스**가 종료시킬 수 있음.
- 연속적 종료; 운영체제에 의해 부모 프로세스의 종료 시 자식 프로세스는 모두 종료

📎 **멀티** 프로세스

- 하나의 프로그램을 **여러 개의 프로세스**로 구성하여 각 프로세스가 **하나의 작업** 처리
- 하나의 주소 공간과 그 안에서 하나의 제어 흐름으로 구성되는 프로세스 사용
- 프로세스 내에서 동시 처리(병렬 처리) 불가능함.

📎 프로세스 시스템의 문제점

- **단일** 프로세스 내에서 **동시 처리** 불가능
- 프로세스를 많이 생성하면 빈번한 **문맥 교환**으로 성능이 저하됨.

📎 문맥 교환

- CPU의 현재 실행하고 있는 프로세스의 문맥을 PCB에 저장하고 다음 프로세스의 PCB로부터 **문맥을 보호하는 작업**
- 문맥; CPU의 모든 레지스터와 기타 운영체제에 따라 요구되는 프로세스의 상태
- PCB; 프로세스 제어 블럭으로 프로세스 명시와 관리를 위해 프로세스 마다 존재하는 관리자

📎 멀티 프로세스 해결 방안

- 별개의 프로그램이라면 **독립된 프로세스** 구조 필요
- 하나의 프로그램 내에서 여러 개의 실행 흐름을 둬야 함.

## 스레드

📎 스레드

- 프로세스 내 실행되는 **흐름 단위**
- 스케줄러에 의해 독립적으로 관리될 수 있는 프로그래밍 명령어의 가장 작은 시퀀스
- 하나의 프로세스 내 **하나 이상**의 스레드 존재
- Stack 영역만 할당 받고, 그 외 부모 영역은 공유함.
    - Stack; 실행에 필요한 최소한의 **정보**

![Untitled](%E1%84%91%E1%85%B3%E1%84%85%E1%85%A9%E1%84%89%E1%85%A6%E1%84%89%E1%85%B3%E1%84%8B%E1%85%AA%20%E1%84%89%E1%85%B3%E1%84%85%E1%85%A6%E1%84%83%E1%85%B3%209ef7e348c8d04bc89ad69b22306bfc40/Untitled%203.png)

📎 스레드 사용 목적

- 단일 스레드 사용할 경우에, 대기 상태 코드 필요
- 요청과 응답에서 지속적으로 흐름을 이어갈 수 있음.
- CPU 속도 향상 → 코어 추가(스레드 필요)

📎 멀티 스레드

- 하나의 어플리케이션을 여러개의 스레드로 구성하여 **하나**의 스레드가 **하나**의 작업을 처리
- **단일 스레드**로 긴 통신 작업을 수행하는 경우 다른 작업을 처리할 수 없어서 사용함.

📎 멀티 프로세스의 특징

- 높은 **안정성**; 하나의 프로세스에 문제가 발생해도 다른 자식 프로세스에 영향 X
- 불필요한 메모리 사용; 프로세스마다 각각 독립된 메모리 공간을 할당해야 함. (메모리 공유가 안 됨.)
- **오버헤드** 발생 주의; 프로세스 간 통신을 위해 IPC를 통해야 하는 경우
- 성능 저하; 스케줄링에 따른 문맥교환 많음.
- 비교적 **간단**한 구현
- 별도의 동기화 작업 **X**

📎 멀티 스레드의 특징

- 자식 스레드에 **문제**가 생기면 전체 프로세스에 영향 미침.
- **높은 응답성**; 자식 스레드 중 하나가 중단되어도 프로그램이 계속적으로 동작
- 스레드 간 **자원 공유** 용이; 부모 프로세스의 자원과 메모리 공유 가능
- 프로세스 할당보다 스레드 할당이 더 **비용**이 적음.
- 구현, 테스트, 디버깅 어려움. (메모리 공유에서 비롯됨.)
- 스레드 간 별도의 **동기화 작업**이 필요하며, 교착상태 발생 주의